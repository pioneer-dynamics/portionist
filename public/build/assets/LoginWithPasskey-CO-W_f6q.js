import{d as f,T as F,e as p,b as a,u as r,w as m,F as N,o as n,Z as R,t as b,f as c,a as t,c as V,g as y,j as h,n as q,i as S}from"./app-CgsIz9cD.js";import{A as T}from"./AuthenticationCard-BDaWjsta.js";import{_ as U}from"./AuthenticationCardLogo-BVJv127M.js";import{_ as j}from"./Checkbox-Cb6ha0a7.js";import{_ as k}from"./InputError-C5fDd5NA.js";import{_ as P}from"./InputLabel-CMFJS916.js";import{_ as A}from"./PrimaryButton-CySBv8ot.js";import{_ as C}from"./TextInput-3GI5nHjy.js";import{_ as E}from"./ConfirmsPasskey-kP1sBNfQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-B0rZE226.js";import"./index-DHE1l8mP.js";const I={key:0,class:"mb-4 font-medium text-sm text-green-600 dark:text-green-400"},z={key:0,class:"mt-4"},D={class:"block mt-4"},M={class:"flex items-center"},W={class:"flex items-center justify-end mt-4"},ae={__name:"LoginWithPasskey",props:{canResetPassword:Boolean,status:String},setup(i){const u=f(!1),d=f(!1),g=f(null),x=f(null),s=F({email:"",password:"",passkey:"",remember:!1}),$=()=>{u.value?L():(d.value=!0,g.value.start(s.email))},L=()=>{s.transform(o=>({...o,remember:s.remember?"on":""})).post(route("login"),{onFinish:()=>s.reset("password")})},B=o=>{o||(u.value=!0,setTimeout(()=>{var e;return(e=x.value)==null?void 0:e.focus()},100)),d.value=!1};return(o,e)=>(n(),p(N,null,[a(r(R),{title:"Log in"}),a(T,null,{logo:m(()=>[a(U)]),default:m(()=>{var w,v,_;return[i.status?(n(),p("div",I,b(i.status),1)):c("",!0),t("form",{onSubmit:S($,["prevent"])},[t("div",null,[a(P,{for:"email",value:"Email"}),a(C,{id:"email",modelValue:r(s).email,"onUpdate:modelValue":e[0]||(e[0]=l=>r(s).email=l),type:"email",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"]),a(k,{class:"mt-2",message:r(s).errors.email},null,8,["message"]),a(k,{class:"mt-2",message:(_=(v=(w=g.value)==null?void 0:w.passkeyForm)==null?void 0:v.errors)==null?void 0:_.email},null,8,["message"])]),u.value?(n(),p("div",z,[a(P,{for:"password",value:"Password"}),a(C,{id:"password",modelValue:r(s).password,"onUpdate:modelValue":e[1]||(e[1]=l=>r(s).password=l),type:"password",ref_key:"passwordInput",ref:x,class:"mt-1 block w-full",required:"",autocomplete:"current-password"},null,8,["modelValue"]),a(k,{class:"mt-2",message:r(s).errors.password},null,8,["message"])])):c("",!0),t("div",D,[t("label",M,[a(j,{checked:r(s).remember,"onUpdate:checked":e[2]||(e[2]=l=>r(s).remember=l),name:"remember"},null,8,["checked"]),e[3]||(e[3]=t("span",{class:"ms-2 text-sm text-gray-600 dark:text-gray-400"},"Remember me",-1))])]),t("div",W,[i.canResetPassword?(n(),V(r(h),{key:0,href:o.route("password.request"),class:"underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"},{default:m(()=>e[4]||(e[4]=[y(" Forgot your password? ")])),_:1},8,["href"])):c("",!0),e[6]||(e[6]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400 px-2"}," | ",-1)),i.canResetPassword?(n(),V(r(h),{key:1,href:o.route("register"),class:"ml-3 underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"},{default:m(()=>e[5]||(e[5]=[y(" Register ")])),_:1},8,["href"])):c("",!0),a(A,{class:q(["ms-4",{"opacity-25":r(s).processing||d.value}]),disabled:r(s).processing||d.value},{default:m(()=>[y(b(u.value?"Login":"Next"),1)]),_:1},8,["class","disabled"])])],32),a(E,{email:r(s).email,ref_key:"passkeyConfirmation",ref:g,onCancelled:B,mode:"login",remember:r(s).remember},null,8,["email","remember"])]}),_:1})],64))}};export{ae as default};
